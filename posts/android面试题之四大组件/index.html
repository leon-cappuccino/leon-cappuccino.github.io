<!doctype html>
<html lang="en-us">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    

    <title>Android面试题之四大组件 | Leon Blog</title>
    <meta property="og:title" content="Android面试题之四大组件 - Leon Blog">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2022-03-10T00:00:00&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2022-03-10T00:00:00&#43;08:00'>
        
    <meta name="Keywords" content="">
    <meta name="description" content="Android四大组件相关的基础相关面试题.">
        
    <meta name="author" content="">
    <meta property="og:url" content="https://leon-cappuccino.github.io/posts/android%E9%9D%A2%E8%AF%95%E9%A2%98%E4%B9%8B%E5%9B%9B%E5%A4%A7%E7%BB%84%E4%BB%B6/">
    <link rel="shortcut icon" href='/favicon.ico'  type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
</head>

<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://leon-cappuccino.github.io/">
                        Leon Blog
                    </a>
                
                
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="" href="https://leon-cappuccino.github.io/">首页</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    
    <article class="post">
        <header>
            <h1 class="post-title">Android面试题之四大组件</h1>
        </header>
        <date class="post-meta meta-date">
            2022年3月10日
        </date>
        
        <div class="post-meta">
            <span>|</span>
            
            <span class="meta-category"><a href='/categories/%E9%9D%A2%E8%AF%95'>面试</a></span>
            
            <span class="meta-category"><a href='/categories/android%E5%9F%BA%E7%A1%80'>Android基础</a></span>
            
        </div>
        
        
        
        <div class="post-content">
            <h2 id="android四大组件相关">Android四大组件相关</h2>
<h3 id="一activity相关">一、Activity相关</h3>
<h4 id="1介绍不同场景下的activity生命周期变化过程">1.介绍不同场景下的Activity生命周期变化过程？</h4>
<h5 id="1activity正常启动">(1)Activity正常启动</h5>
<p><code>onCreate</code>-&gt;<code>onStart</code>-&gt;<code>onResume</code></p>
<h5 id="2activity启动另一个activity">(2)Activity启动另一个Activity</h5>
<h6 id="1b完全挡住a">1)B完全挡住A</h6>
<p>A:<code>onPause</code> -&gt; B:<code>onCreate</code> -&gt; B:<code>onStart</code> -&gt; B:<code>onResume</code> -&gt; A:<code>onSaveInstanceState</code>-&gt; A:<code>onStop</code></p>
<p>如果我们在此时点击Back键，将依次执行B:<code>onPause</code> -&gt; A:<code>onRestart</code> -&gt; A:<code>onStart </code>-&gt; A:<code>onResume</code> -&gt; B:<code>onStop</code> -&gt; B:<code>onDestroy</code></p>
<h6 id="2b没有完全挡住a如dialog">2）B没有完全挡住A，如dialog</h6>
<p>A:<code>onPause</code> -&gt; B:<code>onCreate</code> -&gt; B:<code>onStart</code> -&gt; B:<code>onResume</code> -&gt; A:<code>onSaveInstanceState</code></p>
<p>可以看到，相比完全挡住的情况，由于A可见，因此不会到<code>onStop</code></p>
<p>如果我们此时点击Back键，将依次执行B:<code>onPause</code> -&gt; A:``onResume<code> -&gt; B:</code>onStop<code> -&gt; B:</code>onDestroy`</p>
<p>如果我们此时点击home键，将依次执行B:<code>onPause</code> -&gt; A:<code>onStop</code>-&gt; B:<code>onSaveInstanceState</code> -&gt; B:<code>onStop</code>，再将应用切到前台 A:<code>onRestart</code> -&gt; A:<code>onStart </code>-&gt; B:<code>onRestart</code> -&gt; B:<code>onStart</code> -&gt; B:<code>onResume</code></p>
<p><strong>注意以上的讨论前提是启动模式为standard。</strong></p>
<h5 id="3activity按back键返回">(3)Activity按back键返回</h5>
<p><code>onPause</code> -&gt; <code>onStop</code> -&gt; <code>onDestroy</code></p>
<h5 id="4按home键返回到桌面">(4)按home键返回到桌面</h5>
<p><code>onPause</code> -&gt; <code>onSaveInstanceState</code> -&gt; <code>onStop</code></p>
<h5 id="5锁屏再开屏">(5)锁屏再开屏</h5>
<p><code>onPause</code> -&gt;<code>onSaveInstanceState</code> -&gt; <code>onStop</code>  -&gt;   <code>onRestart</code> -&gt; <code>onStart</code> -&gt; <code>onResume</code></p>
<h5 id="6旋转屏幕">(6)旋转屏幕</h5>
<p><code>onPause</code> -&gt; <code>onSaveInstanceState</code> -&gt; <code>onStop</code> -&gt; <code>onDestroy</code> -&gt; <code>onCreate</code> -&gt; <code>onStart</code> -&gt; <code>onRestoreInstanceState</code> -&gt; <code>onResume</code></p>
<h5 id="7activity-上有-dialog-和下拉状态栏的时候不影响生命周期">(7)Activity 上有 Dialog 和下拉状态栏的时候不影响生命周期</h5>
<h4 id="2如果需要临时状态的保存在哪个方法进行如何恢复">2.如果需要临时状态的保存，在哪个方法进行，如何恢复？</h4>
<p>可以使用<code>onSaveInstanceState()</code>用于临时保存数据，如果希望持久化保存数据可以在<code>onPause</code>中进行。不过该方法并不是每次都会被触发，用户主动按返回键退出程序不会触发<code>onSaveInstanceState()</code>，常见的触发情况有以下几种：1）锁屏 2）旋转屏幕 3）home键</p>
<p>注意：<strong>Activity 与 Fragment 的 savedInstanceState 不能混用</strong>，两者的bundle独立的，没有关系。</p>
<p>最后恢复数据可以重写<code>onRestoreInstanceState()</code>方法。</p>
<h4 id="3什么是任务">3.什么是任务？</h4>
<p>任务是指在执行作业时与用户交互的<strong>一系列 Activity</strong>的有机整体。</p>
<h4 id="4讲讲activity的启动模式">4.讲讲Activity的启动模式</h4>
<p>修改启动模式在在<code>AndroidManifest.xml</code>中<!-- raw HTML omitted -->标签中的<code>android:launchMode</code>属性来选择启动模式</p>
<h5 id="1standard">（1）standard</h5>
<p>在不指定的时候默认是standard，该模式下每次启动一个新的Activity，都会在返回栈中入栈并处于栈顶的位置，standard模式下系统不在乎该Activity是否已经存在，每次启动都会创建新实例。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">onCreate</span>(savedInstanceState: Bundle?) {
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">super</span>.onCreate(savedInstanceState)
</span></span><span style="display:flex;"><span> Log.d(<span style="color:#e6db74">&#34;FirstActivity&#34;</span>, <span style="color:#66d9ef">this</span>.toString())
</span></span><span style="display:flex;"><span> setContentView(R.layout.first_layout)
</span></span><span style="display:flex;"><span> button1.setOnClickListener {
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">val</span> intent = Intent(<span style="color:#66d9ef">this</span>, FirstActivity<span style="color:#f92672">::</span><span style="color:#66d9ef">class</span>.java)
</span></span><span style="display:flex;"><span> startActivity(intent)
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>如果我们连续点击两次按钮，最后创建了三个<code>FirstActivity</code>实例，需要back三次。</p>
<!-- raw HTML omitted -->
<h5 id="2singletop">（2）singleTop</h5>
<p>该模式下启动Activity如果发现返回栈的栈顶已经是该Activity则会直接使用，不会再创新新的Activity实例。如果从<code>FirstActivity</code>进入<code>SecondActivity</code>再进入<code>FirstActivity</code>，由于没有在栈顶发现FirstActivity，还是会再次创建FirstActivity。</p>
<!-- raw HTML omitted -->
<h5 id="3singletask">（3）singleTask</h5>
<p>每次在启动Activity都会在栈中检查是否存在该实例，如果已经存在就会把这个Activity之上所有Activity出栈，如果没有发现再去创建新的实例。</p>
<!-- raw HTML omitted -->
<h5 id="4singleinstance">（4）singleInstance</h5>
<p>指定为该模式的Activity会启用一个新的返回栈管理该Activity，常用于其他程序与我们的程序共享该Activity时。如果intent设定为<code>FirstActivity</code>-&gt;<code>SecondActivity</code>-&gt;<code>ThirdActivity</code>,Back后首先出现<code>FirstActivity</code>，之后才是<code>SecondActivity</code>，即当前返回栈已经空了，才会去显示另一个栈的栈顶Activity。</p>
<!-- raw HTML omitted -->
<h4 id="5讲讲横竖屏切换时activity的生命周期">5.讲讲横竖屏切换时Activity的生命周期？</h4>
<p><code>android:configChanges</code>是Android配置改变属性，常见属性有：orientation—横竖屏切换，keyboardHidden—键盘的可用性发生改变，screenSize—屏幕大小改变。当我们设置了该属性后，当发生上述属性变化的时候将会调用<code>onConfigurationChanged</code>方法。例如横竖屏切换可以这么写：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onConfigurationChanged</span><span style="color:#f92672">(</span>Configuration newConfig<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">super</span><span style="color:#f92672">.</span><span style="color:#a6e22e">onConfigurationChanged</span><span style="color:#f92672">(</span>newConfig<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> orientation <span style="color:#f92672">=</span> newConfig<span style="color:#f92672">.</span><span style="color:#a6e22e">orientation</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>orientation <span style="color:#f92672">==</span> Configuration<span style="color:#f92672">.</span><span style="color:#a6e22e">ORIENTATION_PORTRAIT</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// TODO: 竖屏操作
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>orientation <span style="color:#f92672">==</span> Configuration<span style="color:#f92672">.</span><span style="color:#a6e22e">ORIENTATION_LANDSCAPE</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// TODO: 横屏操作
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p>(1)不设置Activity的 <code>android:configChanges</code>属性时，切屏会重新调用各个生命周期，切横屏时会执行
一次，切竖屏时会执行两次。</p>
<p>(2)设置Activity的 <code>android:configChanges=&quot;orientation&quot;</code>时，切屏还是会重新调用各个生命周
期，切横、竖屏时只会执行一次。</p>
<p>(3)设置Activity的 <code>android:configChanges=&quot;orientation|keyboardHidden&quot;</code> 时，切屏不会重新调
用各个生命周期，只会执行 onConfigurationChanged() 方法。</p>
<h4 id="6如何将一个activity设置成窗口的样式">6.如何将一个Activity设置成窗口的样式？</h4>
<p>Activity配置属性中加入 <code>android:theme=&quot;@android:style/Theme.Dialog&quot;</code></p>
<h4 id="7activity之间的数据传递方式有哪些">7.Activity之间的数据传递方式有哪些？</h4>
<h5 id="1使用intent的putextra传递">（1）使用intent的<code>putExtra</code>传递</h5>
<p>在第一个activity中</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">//创建Intent
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> Intent intent <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Intent<span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">,</span>SecondActivity<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span> <span style="color:#75715e">//设置传递的键值对
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> intent<span style="color:#f92672">.</span><span style="color:#a6e22e">putExtra</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;data&#34;</span><span style="color:#f92672">,</span>str<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span> <span style="color:#75715e">//激活Intent
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> startActivity<span style="color:#f92672">(</span>intent<span style="color:#f92672">);</span>
</span></span></code></pre></div><p>第二个activity中</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// 获取Intent
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> Intent intent <span style="color:#f92672">=</span> getIntent<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span> <span style="color:#75715e">//获取传递的值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> String str <span style="color:#f92672">=</span> intent<span style="color:#f92672">.</span><span style="color:#a6e22e">getStringExtra</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;data&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span> <span style="color:#75715e">//使用传递的值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> tv<span style="color:#f92672">.</span><span style="color:#a6e22e">setText</span><span style="color:#f92672">(</span>str<span style="color:#f92672">);</span>
</span></span></code></pre></div><h5 id="2使用bundle传递">（2）使用Bundle传递</h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">//第一个activity
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//创建intent
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> Intent intent <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Intent<span style="color:#f92672">(</span>MainActivity<span style="color:#f92672">.</span><span style="color:#a6e22e">this</span><span style="color:#f92672">,</span>SecondActivity<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span> <span style="color:#75715e">//得到Bundle对象，用Bundle传递数据
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> Bundle bundle <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Bundle<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span> bundle<span style="color:#f92672">.</span><span style="color:#a6e22e">putString</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;data&#34;</span><span style="color:#f92672">,</span> str<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span> <span style="color:#75715e">//将Bundle塞进intent
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> intent<span style="color:#f92672">.</span><span style="color:#a6e22e">putExtra</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;bun&#34;</span><span style="color:#f92672">,</span> bundle<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span> <span style="color:#75715e">//激活Intent
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> startActivity<span style="color:#f92672">(</span>intent<span style="color:#f92672">);</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">//第二个activity
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//获取Bundle
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> Intent intent <span style="color:#f92672">=</span> getIntent<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span> Bundle bundle <span style="color:#f92672">=</span> intent<span style="color:#f92672">.</span><span style="color:#a6e22e">getBundleExtra</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;bun&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span> String str <span style="color:#f92672">=</span> bundle<span style="color:#f92672">.</span><span style="color:#a6e22e">getString</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;data&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span> tv<span style="color:#f92672">.</span><span style="color:#a6e22e">setText</span><span style="color:#f92672">(</span>str<span style="color:#f92672">);</span>
</span></span></code></pre></div><h5 id="3sharedpreferences传递数据">（3）SharedPreferences传递数据</h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">//第一个activity
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">//获取SharedPreferences
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>SharedPreferences sp <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getSharedPreferences</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;info&#34;</span><span style="color:#f92672">,</span> 1<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span> <span style="color:#75715e">//获取Editor
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> Editor edit <span style="color:#f92672">=</span> sp<span style="color:#f92672">.</span><span style="color:#a6e22e">edit</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span> edit<span style="color:#f92672">.</span><span style="color:#a6e22e">putString</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;data&#34;</span><span style="color:#f92672">,</span> str<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span> edit<span style="color:#f92672">.</span><span style="color:#a6e22e">commit</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span> <span style="color:#75715e">//创建Intent
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> Intent intent <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Intent<span style="color:#f92672">(</span>MainActivity<span style="color:#f92672">.</span><span style="color:#a6e22e">this</span><span style="color:#f92672">,</span>TwoActivity<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span> <span style="color:#75715e">//激活Intent
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> startActivity<span style="color:#f92672">(</span>intent<span style="color:#f92672">);</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">//第二个activity
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>SharedPreferences sp <span style="color:#f92672">=</span> <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getSharedPreferences</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;info&#34;</span><span style="color:#f92672">,</span> 1<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span> <span style="color:#75715e">//设置数据
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>tv<span style="color:#f92672">.</span><span style="color:#a6e22e">setText</span><span style="color:#f92672">(</span>sp<span style="color:#f92672">.</span><span style="color:#a6e22e">getString</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;data&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">));</span>
</span></span></code></pre></div><h5 id="4使用序列化seriazable">（4）使用序列化Seriazable</h5>
<p>首先对一个对象如bean实现Seriazable接口，之后通过Intent的putExtra传递，注意在接收该bean对象时使用<code>intent.getSerializableExtra(&quot;key&quot;)</code></p>
<h5 id="5使用静态变量传递数据">（5）使用静态变量传递数据</h5>
<h5 id="6使用全局变量application">（6）使用全局变量Application</h5>
<p>为每个应用程序定义一个全局的对象，使用全局对象需要继承<code>android.app.Application</code>类，可以在该类中定义任何方法，注意需要在<code>AndroidManifest.xml</code>文件中定义该类，之后可以在程序中get。</p>
<h3 id="二service">二、Service</h3>
<h4 id="1说说service的生命周期与启动方式">1.说说Service的生命周期与启动方式</h4>
<!-- raw HTML omitted -->
<p>根据启动方式不一样，Service的生命周期也不一样。Service的启动方式可以分为直接启动与绑定启动</p>
<h5 id="1直接启动service">（1）直接启动service</h5>
<p>执行的生命周期：<code>onCreate()</code>-&gt;<code>onStartCommand()</code>-&gt;<code>onDestroy()</code></p>
<p>1)<code>startService()</code>: <code>onCreate()</code>-&gt;<code>onStartCommand()</code></p>
<p>2)<code>stopService</code>，会调用<code>onDestroy()</code></p>
<p>在项目的任何位置调用了Context的<code>startService()</code>方法，则走左边的启动service的生命周期，注意onCreate()方法会在Service创建的时候调用，并只调用一次；<code>onStartCommand()</code>方法会在每次Service启动的时候调用，因此可以执行多次，如果我们希望Service一旦启动就立刻去执行某个动作，就可以将逻辑写在 <code>onStartCommand()</code>方法里；<code>onDestroy()</code>方法会在Service销毁的时候调用，当Service销毁时，我们应该在<code>onDestroy()</code>方法中回收那些不再使用的资源。</p>
<h5 id="2绑定启动service">（2）绑定启动service</h5>
<p>执行的生命周期：<code>onCreate()</code>-&gt;<code>onBind()</code>-&gt; <code>onUnbind()</code>-&gt;<code>onDestroy()</code></p>
<p>1）<code>bindService</code>:   <code>onCreate()</code>-&gt;<code>onBind()</code></p>
<p>2）<code>unbindService()</code>: <code>onUnbind()</code>-&gt;<code>onDestroy()</code></p>
<p>Context的<code>bindService()</code>可以获取一个Service的持久连接，如果这个Service之前还没有创建过，<code>onCreate()</code>方法会先于<code>onBind()</code>方法执行。</p>
<h4 id="2activity如何与service绑定启动">2.Activity如何与Service绑定启动？</h4>
<h5 id="1直接启动service-1">（1）直接启动service</h5>
<p>创建一个类继承service类，同时在<code>AndroidManifest.xml</code>注册，在<!-- raw HTML omitted -->中</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;service</span>
</span></span><span style="display:flex;"><span> <span style="color:#a6e22e">android:name=</span><span style="color:#e6db74">&#34;.MyService&#34;</span>
</span></span><span style="display:flex;"><span> <span style="color:#a6e22e">android:enabled=</span><span style="color:#e6db74">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span> <span style="color:#a6e22e">android:exported=</span><span style="color:#e6db74">&#34;true&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">&lt;/service&gt;</span>
</span></span></code></pre></div><p>启动和停止使用<code>startService()</code>和<code>stopService</code>，注意两个函数中需要传入的是Intent</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MainActivity</span> : AppCompatActivity() {
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">onCreate</span>(savedInstanceState: Bundle?) {
</span></span><span style="display:flex;"><span> 	<span style="color:#66d9ef">super</span>.onCreate(savedInstanceState)
</span></span><span style="display:flex;"><span> 	setContentView(R.layout.activity_main)
</span></span><span style="display:flex;"><span> 	startServiceBtn.setOnClickListener {
</span></span><span style="display:flex;"><span> 	<span style="color:#66d9ef">val</span> intent = Intent(<span style="color:#66d9ef">this</span>, MyService<span style="color:#f92672">::</span><span style="color:#66d9ef">class</span>.java)
</span></span><span style="display:flex;"><span> 	startService(intent) <span style="color:#75715e">// 启动Service
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> 	}
</span></span><span style="display:flex;"><span> 	stopServiceBtn.setOnClickListener {
</span></span><span style="display:flex;"><span> 	<span style="color:#66d9ef">val</span> intent = Intent(<span style="color:#66d9ef">this</span>, MyService<span style="color:#f92672">::</span><span style="color:#66d9ef">class</span>.java)
</span></span><span style="display:flex;"><span> 	stopService(intent) <span style="color:#75715e">// 停止Service
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> 		}
</span></span><span style="display:flex;"><span> 	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h5 id="2绑定启动service-1">（2）绑定启动service</h5>
<p>1)首先得到一个继承service的类，实现<code>onBind()</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyService</span> : Service() {
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> mBinder = DownloadBinder()
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DownloadBinder</span> : Binder() {
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">startDownload</span>() {
</span></span><span style="display:flex;"><span> Log.d(<span style="color:#e6db74">&#34;MyService&#34;</span>, <span style="color:#e6db74">&#34;startDownload executed&#34;</span>)
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">getProgress</span>(): Int {
</span></span><span style="display:flex;"><span> Log.d(<span style="color:#e6db74">&#34;MyService&#34;</span>, <span style="color:#e6db74">&#34;getProgress executed&#34;</span>)
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">onBind</span>(intent: Intent): IBinder {
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">return</span> mBinder
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>2)在activity中创建了一个<code>ServiceConnection</code>的匿名类实现,并在里面重写了<code>onServiceConnected()</code>方法和<code>onServiceDisconnected()</code>方法</p>
<p>3)使用<code>bindService()</code>并传入connection绑定activity</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MainActivity</span> : AppCompatActivity() {
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">lateinit</span> <span style="color:#66d9ef">var</span> downloadBinder: MyService.DownloadBinder
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> connection = <span style="color:#66d9ef">object</span> <span style="color:#960050;background-color:#1e0010">: </span><span style="color:#a6e22e">ServiceConnection</span> {
</span></span><span style="display:flex;"><span>     <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">onServiceConnected</span>(name: ComponentName, service: IBinder) {
</span></span><span style="display:flex;"><span>         downloadBinder = service <span style="color:#66d9ef">as</span> MyService.DownloadBinder
</span></span><span style="display:flex;"><span>         downloadBinder.startDownload()
</span></span><span style="display:flex;"><span>         downloadBinder.getProgress()
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>     <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">onServiceDisconnected</span>(name: ComponentName) {
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span>     <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">onCreate</span>(savedInstanceState: Bundle?) {
</span></span><span style="display:flex;"><span>         bindServiceBtn.setOnClickListener {
</span></span><span style="display:flex;"><span>             <span style="color:#66d9ef">val</span> intent = Intent(<span style="color:#66d9ef">this</span>, MyService<span style="color:#f92672">::</span><span style="color:#66d9ef">class</span>.java)
</span></span><span style="display:flex;"><span>             bindService(intent, connection, Context.BIND_AUTO_CREATE) <span style="color:#75715e">// 绑定Service
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>         }
</span></span><span style="display:flex;"><span>         
</span></span><span style="display:flex;"><span>         unbindServiceBtn.setOnClickListener {
</span></span><span style="display:flex;"><span>         	unbindService(connection) <span style="color:#75715e">// 解绑Service
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>     }
</span></span><span style="display:flex;"><span>     }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="3service在不同情况下的生命周期是怎样的">3.Service在不同情况下的生命周期是怎样的</h4>
<h5 id="1先启动后绑定服务">（1）先启动后绑定服务</h5>
<p>先<code>startService</code>后<code>bindService</code>的生命周期：<code>onCreate()</code>-&gt;<code>onStartCommand()</code>-&gt;<code>onBind()</code>-&gt; <code>onUnbind()</code>-&gt;<code>onDestroy()</code></p>
<h5 id="2先绑定后启动服务">（2）先绑定后启动服务</h5>
<p>先<code>bindService</code>后<code>startService</code>的生命周期：<code>onCreate()</code>-&gt;<code>onBind()</code>-&gt;<code>onStartCommand()</code>-&gt; <code>onUnbind()</code>-&gt;<code>onDestroy()</code></p>
<h4 id="4service中可以弹toast吗">4.Service中可以弹Toast吗?</h4>
<p>本质是在问下Service是执行在UI线程中吗，<strong>默认情况下四大组件都是在UI线程中执行的</strong>，Service本身就是Context的子类，可以获取到Context对象，所以Service中可以弹Toast。</p>
<h4 id="5何时使用intentservice如何使用">5.何时使用IntentService，如何使用？</h4>
<p>IntentService是Service的子类，是一个异步的，会自动停止的服务，很好解决了传统的Service中处理完耗时操作忘记停止并销毁Service的问题。</p>
<p>service默认运行在主线程，如果处理耗时的逻辑放在主线程中容易ANR，为了方便起见可以使用<code>IntentService</code>类，在<code>onHandleIntent()</code>中处理耗时的逻辑，该类自动开启关闭线程。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyIntentService</span> : IntentService(<span style="color:#e6db74">&#34;MyIntentService&#34;</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//字符串可以随意指定
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">onHandleIntent</span>(intent: Intent?) {
</span></span><span style="display:flex;"><span>     <span style="color:#75715e">// 打印当前线程的id
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>     Log.d(<span style="color:#e6db74">&#34;MyIntentService&#34;</span>, <span style="color:#e6db74">&#34;Thread id is </span><span style="color:#e6db74">${Thread.currentThread().name}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">onDestroy</span>() {
</span></span><span style="display:flex;"><span>     <span style="color:#66d9ef">super</span>.onDestroy()
</span></span><span style="display:flex;"><span>     Log.d(<span style="color:#e6db74">&#34;MyIntentService&#34;</span>, <span style="color:#e6db74">&#34;onDestroy executed&#34;</span>)
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="6intentservice与service的区别">6.<code>IntentService</code>与Service的区别</h4>
<p>线程方面：Service运行在主线程，编写耗时的逻辑和操作容易ANR。IntentService不会阻塞UI线程，会单独开辟一个线程。同时<code>Intentservice</code>若未执行完成上一次的任务，将不会新开一个线程，是等待之前的任务完成后，再执行新的任务，任务完成后再次调用 <code>stopSelf()</code>。</p>
<p>优先级方面： <code>Intentservice</code>具有高优先级，其优先级是介于前台程序与纯后台程序之间的，相比Service更不容易被杀死。</p>
<h3 id="三broadcast">三、Broadcast</h3>
<h4 id="1broadcast的作用与分类">1.Broadcast的作用与分类</h4>
<h5 id="1作用">（1）作用</h5>
<p>在同一个APP的不同组件，或者在不同APP的组件之间（系统广播），用于数据的传递和消息的发送。</p>
<h5 id="2分类">（2）分类</h5>
<p>Broadcast分为标准广播和有序广播</p>
<p>1）标准广播（normal broadcasts）是一种完全异步执行的广播，在广播发出之后，所有的
BroadcastReceiver几乎会在同一时刻收到这条广播消息，因此它们之间没有任何先后顺
序可言。<strong>特点</strong>：<em>效率比较高，无法被截断。</em></p>
<!-- raw HTML omitted -->
<p>2）有序广播（ordered broadcasts）是一种同步执行的广播，在广播发出之后，同一时刻
只会有一个BroadcastReceiver能够收到这条广播消息，当这个BroadcastReceiver中的
逻辑执行完毕后，广播才会继续传递。</p>
<!-- raw HTML omitted -->
<p><strong>特点</strong>：BroadcastReceiver有先后顺序，优先级高的BroadcastReceiver就可以先收到广播消息，并且前面的BroadcastReceiver可以截断正在传递的广播，这样后面的BroadcastReceiver就无法收到广播消息了。</p>
<h4 id="2broadcast两种注册方式是什么">2.Broadcast两种注册方式是什么</h4>
<h5 id="1静态注册androidmanifestxml中注册">（1）静态注册（<code>AndroidManifest.xml</code>中注册）</h5>
<p>APP未启动就可以接受广播，即开机启动，尽量不使用静态广播 。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;manifest</span> <span style="color:#a6e22e">xmlns:android=</span><span style="color:#e6db74">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span> <span style="color:#a6e22e">package=</span><span style="color:#e6db74">&#34;com.example.broadcasttest&#34;</span>
</span></span><span style="display:flex;"><span> <span style="color:#960050;background-color:#1e0010">//声明权限</span>
</span></span><span style="display:flex;"><span>	<span style="color:#960050;background-color:#1e0010">&lt;uses-permission</span> <span style="color:#a6e22e">android:name=</span><span style="color:#e6db74">&#34;android.permission.RECEIVE_BOOT_COMPLETED&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;application</span>
</span></span><span style="display:flex;"><span>     <span style="color:#a6e22e">android:allowBackup=</span><span style="color:#e6db74">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>     <span style="color:#a6e22e">android:icon=</span><span style="color:#e6db74">&#34;@mipmap/ic_launcher&#34;</span>
</span></span><span style="display:flex;"><span>     <span style="color:#a6e22e">android:label=</span><span style="color:#e6db74">&#34;@string/app_name&#34;</span>
</span></span><span style="display:flex;"><span>     <span style="color:#a6e22e">android:roundIcon=</span><span style="color:#e6db74">&#34;@mipmap/ic_launcher_round&#34;</span>
</span></span><span style="display:flex;"><span>     <span style="color:#a6e22e">android:supportsRtl=</span><span style="color:#e6db74">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>     <span style="color:#a6e22e">android:theme=</span><span style="color:#e6db74">&#34;@style/AppTheme&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>     ...
</span></span><span style="display:flex;"><span>   //添加receiver
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">&lt;receiver</span>
</span></span><span style="display:flex;"><span>     <span style="color:#a6e22e">android:name=</span><span style="color:#e6db74">&#34;.BootCompleteReceiver&#34;</span>
</span></span><span style="display:flex;"><span>     <span style="color:#a6e22e">android:enabled=</span><span style="color:#e6db74">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>     <span style="color:#a6e22e">android:exported=</span><span style="color:#e6db74">&#34;true&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>         <span style="color:#f92672">&lt;intent-filter&gt;</span>
</span></span><span style="display:flex;"><span>    		 <span style="color:#f92672">&lt;action</span> <span style="color:#a6e22e">android:name=</span><span style="color:#e6db74">&#34;android.intent.action.BOOT_COMPLETED&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>     	<span style="color:#f92672">&lt;/intent-filter&gt;</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">&lt;/receiver&gt;</span>
</span></span><span style="display:flex;"><span>     <span style="color:#f92672">&lt;/application&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/manifest&gt;</span>
</span></span></code></pre></div><p>之后可以在<code>onReceive()</code>中加入一些操作。</p>
<p><strong>注意</strong>：不要在<code>onReceive()</code>方法中添加过多的逻辑或者进行任何的耗时操作，因为<code>BroadcastReceiver</code>中是不允许开启线程的，当<code>onReceive()</code>方法运行了较长时间而没有结束时，程序就会出现错误。</p>
<h5 id="2动态注册在代码中注册">（2）动态注册（在代码中注册）</h5>
<p>广播的注册在<code>onCreate()</code>中使用<code>registerReceiver()</code>注册，相应的在<code>onDestroy()</code>中用<code>unregisterReceiver()</code>取消注册。以监听系统时间变化为例：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MainActivity</span> : AppCompatActivity() {
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">lateinit</span> <span style="color:#66d9ef">var</span> timeChangeReceiver: TimeChangeReceiver
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">onCreate</span>(savedInstanceState: Bundle?) {
</span></span><span style="display:flex;"><span>     <span style="color:#66d9ef">super</span>.onCreate(savedInstanceState)
</span></span><span style="display:flex;"><span>     setContentView(R.layout.activity_main)
</span></span><span style="display:flex;"><span>     <span style="color:#66d9ef">val</span> intentFilter = IntentFilter()
</span></span><span style="display:flex;"><span>     intentFilter.addAction(<span style="color:#e6db74">&#34;android.intent.action.TIME_TICK&#34;</span>)
</span></span><span style="display:flex;"><span>     timeChangeReceiver = TimeChangeReceiver()
</span></span><span style="display:flex;"><span>     registerReceiver(timeChangeReceiver, intentFilter)
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">onDestroy</span>() {
</span></span><span style="display:flex;"><span>     <span style="color:#66d9ef">super</span>.onDestroy()
</span></span><span style="display:flex;"><span>     unregisterReceiver(timeChangeReceiver)
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">inner</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TimeChangeReceiver</span> : BroadcastReceiver() {
</span></span><span style="display:flex;"><span>     <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">onReceive</span>(context: Context, intent: Intent) {
</span></span><span style="display:flex;"><span>     Toast.makeText(context, <span style="color:#e6db74">&#34;Time has changed&#34;</span>, Toast.LENGTH_SHORT).show()
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="四contentprovider">四、<code>ContentProvider</code></h3>
<p><code>ContentProvider</code>主要用于在不同的应用程序之间实现数据共享的功能，它提供了一套完整的机制，允许一个程序访问另一个程序中的数据，还能保证被访问数据的安全性。</p>
<h4 id="1如何在程序运行时申请权限">1.如何在程序运行时申请权限</h4>
<p>对于Android中的普通权限，在只需要在<code>AndroidManifest.xml</code>中声明，对于危险权限必须要用户手动授权，具体危险权限可以参照危险权限表格。在此以<code>CALL_PHONE</code>打电话为例。</p>
<h5 id="1判断用户是否给过授权">（1）判断用户是否给过授权</h5>
<p>判断用户是否给过授权通过<code>ContextCompat.checkSelfPermission()</code>，该函数返回的是一个<code>int</code>型，</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">checkSelfPermission</span> <span style="color:#f92672">(</span>Context context<span style="color:#f92672">,</span>String permission<span style="color:#f92672">)</span>
</span></span></code></pre></div><p>更详细的说是<code>PackageManager.PERMISSION_GRANTED</code>，该参数本质上是一个整型，如果用户授权就会返回该参数。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>makeCall.setOnClickListener {
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">if</span> (ContextCompat.checkSelfPermission(<span style="color:#66d9ef">this</span>,
</span></span><span style="display:flex;"><span> Manifest.permission.CALL_PHONE) <span style="color:#f92672">!=</span> PackageManager.PERMISSION_GRANTED) {
</span></span><span style="display:flex;"><span> 	ActivityCompat.requestPermissions(<span style="color:#66d9ef">this</span>,
</span></span><span style="display:flex;"><span> 		arrayOf(Manifest.permission.CALL_PHONE), <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span> } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span> 	call()
</span></span><span style="display:flex;"><span> }}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">private</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">call</span>() {
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span> 	<span style="color:#66d9ef">val</span> intent = Intent(Intent.ACTION_CALL)
</span></span><span style="display:flex;"><span> 	intent.<span style="color:#66d9ef">data</span> = Uri.parse(<span style="color:#e6db74">&#34;tel:10086&#34;</span>)
</span></span><span style="display:flex;"><span> 	startActivity(intent)
</span></span><span style="display:flex;"><span> } <span style="color:#66d9ef">catch</span> (e: SecurityException) {
</span></span><span style="display:flex;"><span> 	e.printStackTrace()
</span></span><span style="display:flex;"><span> }}
</span></span></code></pre></div><p>总体逻辑比较简单，通过<code>ContextCompat.checkSelfPermission()</code>判断用户是否授权，授权则直接调用call，没有授权我们就需要调用<code>ActivityCompat.requestPermissions()</code>申请授权，在<code>ActivityCompat.requestPermissions()</code>中传入参数，之后用户会受到接受或者拒绝该权限的界面，用户的选择结果将会回调<code>onRequestPermissionsResult()</code>方法，并传入参数。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">requestPermissions</span> <span style="color:#f92672">(</span>Activity activity<span style="color:#f92672">,</span> 
</span></span><span style="display:flex;"><span>                String<span style="color:#f92672">[]</span> permissions<span style="color:#f92672">,</span> 
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">int</span> requestCode<span style="color:#f92672">)</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">onRequestPermissionsResult</span><span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> requestCode<span style="color:#f92672">,</span> String<span style="color:#f92672">[]</span> permissions<span style="color:#f92672">,</span> <span style="color:#66d9ef">int</span><span style="color:#f92672">[]</span> grantResults<span style="color:#f92672">)</span>
</span></span></code></pre></div><h5 id="2实现onrequestpermissionsresult">（2）实现<code>onRequestPermissionsResult()</code></h5>
<p>由于<code>onRequestPermissionsResult()</code>是一个抽象方法，我们需要实现该方法，根据用户选择的结果给予相应的操作。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">onRequestPermissionsResult</span>(requestCode: Int,
</span></span><span style="display:flex;"><span> permissions: Array&lt;String&gt;, grantResults: IntArray) {
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">super</span>.onRequestPermissionsResult(requestCode, permissions, grantResults)
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">when</span> (requestCode) {
</span></span><span style="display:flex;"><span> 	<span style="color:#ae81ff">1</span> <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span> 		<span style="color:#66d9ef">if</span> (grantResults.isNotEmpty() <span style="color:#f92672">&amp;&amp;</span>
</span></span><span style="display:flex;"><span>		 grantResults[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">==</span> PackageManager.PERMISSION_GRANTED) {
</span></span><span style="display:flex;"><span> 				call()
</span></span><span style="display:flex;"><span> 		} <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span> 				Toast.makeText(<span style="color:#66d9ef">this</span>, <span style="color:#e6db74">&#34;You denied the permission&#34;</span>,
</span></span><span style="display:flex;"><span> 				Toast.LENGTH_SHORT).show()
</span></span><span style="display:flex;"><span> }}}}
</span></span></code></pre></div><h4 id="2如何使用contentprovider访问其他程序中的数据">2.如何使用<code>ContentProvider</code>访问其他程序中的数据</h4>
<p>如果一个应用程序通过<code>ContentProvider</code>对其数据提供了外部访问接口，那么任何其他的应用程序都可以对这部分数据进行访问。Android系统中自带的通讯录、短信、媒体库等程序都提供了类似的访问接口。</p>
<p>对于每一个应用程序来说，如果想要访问<code>ContentProvider</code>中共享的数据，就一定要借助<code>ContentResolver</code>类。我们可以通过Context中的<code>getContentResolver()</code>方法获取该类的实例，<code>ContentResolver</code>包含的主要方法有<code>insert()</code>，<code>update()</code>，<code>delete()</code>，<code>query()</code>。</p>
<p><code>ContentResolver</code>的增删改查函数中必须要传入一个参数URI，该URI给<code>ContentProvider</code>中的数据建立了唯一标识符，它主要由两部分组成：authority和path，比如某个应用的包名是<code>com.example.app</code>，则URI的标准格式为</p>
<pre tabindex="0"><code>content://com.example.app.provider/table1
</code></pre><h5 id="1得到uri对象">（1）得到URI对象</h5>
<p>将URI传入<code>ContentResolver</code>首先需要将URI解析为URI对象才可以传入，只需要调用<code>Uri.parse()</code>方法</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> uri = Uri.parse(<span style="color:#e6db74">&#34;content://com.example.app.provider/table1&#34;</span>)
</span></span></code></pre></div><h5 id="2使用增删改查函数">（2）使用增删改查函数</h5>
<h6 id="1query">1）query</h6>
<p>以query函数为例，最后返回一个Cursor对象。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">final</span> Cursor <span style="color:#a6e22e">query</span><span style="color:#f92672">(</span>Uri uri<span style="color:#f92672">,</span> String<span style="color:#f92672">[]</span> projection<span style="color:#f92672">,</span> String selection<span style="color:#f92672">,</span> String<span style="color:#f92672">[]</span> selectionArgs<span style="color:#f92672">,</span> String sortOrder<span style="color:#f92672">)</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> cursor = contentResolver.query(
</span></span><span style="display:flex;"><span> uri,
</span></span><span style="display:flex;"><span> projection,
</span></span><span style="display:flex;"><span> selection,
</span></span><span style="display:flex;"><span> selectionArgs,
</span></span><span style="display:flex;"><span> sortOrder)
</span></span></code></pre></div><!-- raw HTML omitted -->
<p>之后将数据从Cursor对象中逐个读取出来，最后一定要关闭cursor</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">while</span> (cursor.moveToNext()) {
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">val</span> column1 = cursor.getString(cursor.getColumnIndex(<span style="color:#e6db74">&#34;column1&#34;</span>))
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">val</span> column2 = cursor.getInt(cursor.getColumnIndex(<span style="color:#e6db74">&#34;column2&#34;</span>))
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>cursor.close()
</span></span></code></pre></div><h6 id="2insert">2）insert</h6>
<p>使用insert函数首先需要将待添加的数据组装到<code>ContentValues</code>中</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">final</span> Uri <span style="color:#a6e22e">insert</span><span style="color:#f92672">(</span>Uri url<span style="color:#f92672">,</span> ContentValues values<span style="color:#f92672">)</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> values = contentValuesOf(<span style="color:#e6db74">&#34;column1&#34;</span> to <span style="color:#e6db74">&#34;text&#34;</span>, <span style="color:#e6db74">&#34;column2&#34;</span> to <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>contentResolver.insert(uri, values)
</span></span></code></pre></div><h6 id="3update">3）update</h6>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">update</span><span style="color:#f92672">(</span>Uri uri<span style="color:#f92672">,</span> ContentValues values<span style="color:#f92672">,</span> String where<span style="color:#f92672">,</span> String<span style="color:#f92672">[]</span> selectionArgs<span style="color:#f92672">)</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">val</span> values = contentValuesOf(<span style="color:#e6db74">&#34;column1&#34;</span> to <span style="color:#e6db74">&#34;&#34;</span>)
</span></span><span style="display:flex;"><span>contentResolver.update(uri, values, <span style="color:#e6db74">&#34;column1 = ? and column2 = ?&#34;</span>, arrayOf(<span style="color:#e6db74">&#34;text&#34;</span>, <span style="color:#e6db74">&#34;1&#34;</span>))
</span></span></code></pre></div><h6 id="4delete">4)delete</h6>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">delete</span><span style="color:#f92672">(</span>Uri url<span style="color:#f92672">,</span> String where<span style="color:#f92672">,</span> String<span style="color:#f92672">[]</span> selectionArgs<span style="color:#f92672">)</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span>contentResolver.delete(uri, <span style="color:#e6db74">&#34;column2 = ?&#34;</span>, arrayOf(<span style="color:#e6db74">&#34;1&#34;</span>))
</span></span></code></pre></div><h4 id="3如何创建自己的contentprovider其他程序访问">3.如何创建自己的<code>ContentProvider</code>其他程序访问</h4>
<p>首先需要新建一个类去继承<code>ContentProvider</code>，并实现<code>ContentProvider</code>的6个抽象方法。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyProvider</span> : ContentProvider() {
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">onCreate</span>(): Boolean {
</span></span><span style="display:flex;"><span> 	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">query</span>(uri: Uri, projection: Array&lt;String&gt;?, selection: String?,
</span></span><span style="display:flex;"><span> selectionArgs: Array&lt;String&gt;?, sortOrder: String?): Cursor? {
</span></span><span style="display:flex;"><span> 	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span>
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">insert</span>(uri: Uri, values: ContentValues?): Uri? {
</span></span><span style="display:flex;"><span> 	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span>
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">update</span>(uri: Uri, values: ContentValues?, selection: String?,
</span></span><span style="display:flex;"><span> selectionArgs: Array&lt;String&gt;?): Int {
</span></span><span style="display:flex;"><span> 	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">delete</span>(uri: Uri, selection: String?, selectionArgs: Array&lt;String&gt;?): Int {
</span></span><span style="display:flex;"><span> 	<span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">getType</span>(uri: Uri): String? {
</span></span><span style="display:flex;"><span> 	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">null</span>
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><code>onCreate()</code>: 初始化<code>ContentProvider</code>的时候调用。在这里完成对数据库的创建和升级等操作，返回true表示<code>ContentProvider</code>初始化成功，返回false则表示失败。</p>
<p><code>getType()</code>：根据传入的内容URI返回相应的MIME类型。</p>
<p>剩余的增删改查函数我们不在赘述。</p>
<h5 id="1什么是mime">（1）什么是MIME？</h5>
<p>对于此处的MIME类型，MIME字符串主要由3部分组成，MIME必须以vnd开头；如果内容URI以路径结尾，则后接android.cursor.dir/；如果内容URI以id结尾，则后接android.cursor.item/；最后接上vnd.<!-- raw HTML omitted -->.<!-- raw HTML omitted -->。</p>
<p>因此，对于<code>content://com.example.app.provider/table1</code>这个内容URI，它所对应的MIME类
型就可以写成</p>
<pre tabindex="0"><code>vnd.android.cursor.dir/vnd.com.example.app.provider.table1
</code></pre><p>对于content://com.example.app.provider/table1/1这个内容URI，它所对应的MIME类型就可以写成</p>
<pre tabindex="0"><code>vnd.android.cursor.item/vnd.com.example.app.provider.table1
</code></pre><h5 id="2关于内容uri">（2）关于内容URI</h5>
<p>内容URI的格式主要就只有两种，以路径结尾表示期望访问该表中所有的数据：</p>
<pre tabindex="0"><code>content://com.example.app.provider/table1
</code></pre><p>以id结尾表示期望访问该表中拥有相应id的数据，如下面的内容URI表示期望访问的是com.example.app这个应用的table1表中id为1的数据</p>
<pre tabindex="0"><code>content://com.example.app.provider/table1/1
</code></pre><p>除此之外还有两个通配符匹配比较常用：</p>
<pre tabindex="0"><code>//匹配任意表的内容URI格式
content://com.example.app.provider/*
//匹配table1表中任意一行数据的内容URI格式
content://com.example.app.provider/table1/#
</code></pre><h5 id="3传入uri">（3）传入URI</h5>
<p>在实现必要的六个函数之前，需要先初始化一些东西，由于增删改查和<code>getType()</code>都需要<code>uriMatcher.match(uri)</code>来匹配，因此我们必须先使用<code>uriMatcher.addURI</code>添加URI，同时设定我们的自定义返回值，如下面的代码中返回值就是<code>table1Dir</code>。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyProvider</span> : ContentProvider() {
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> table1Dir = <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> table1Item = <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> table2Dir = <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> table2Item = <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">val</span> uriMatcher = UriMatcher(UriMatcher.NO_MATCH)
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">init</span> {
</span></span><span style="display:flex;"><span> 	uriMatcher.addURI(<span style="color:#e6db74">&#34;com.example.app.provider&#34;</span>, <span style="color:#e6db74">&#34;table1&#34;</span>, table1Dir)
</span></span><span style="display:flex;"><span> 	uriMatcher.addURI(<span style="color:#e6db74">&#34;com.example.app.provider &#34;</span>, <span style="color:#e6db74">&#34;table1/#&#34;</span>, table1Item)
</span></span><span style="display:flex;"><span> 	uriMatcher.addURI(<span style="color:#e6db74">&#34;com.example.app.provider &#34;</span>, <span style="color:#e6db74">&#34;table2&#34;</span>, table2Dir)
</span></span><span style="display:flex;"><span> 	uriMatcher.addURI(<span style="color:#e6db74">&#34;com.example.app.provider &#34;</span>, <span style="color:#e6db74">&#34;table2/#&#34;</span>, table2Item)
</span></span><span style="display:flex;"><span> }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h5 id="4实现gettype">（4）实现<code>getType()</code></h5>
<p>通过<code>uriMatcher.match(uri)</code>，<code>getType()</code>就可以返回不同的MIME</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">getType</span>(uri: Uri) = <span style="color:#66d9ef">when</span> (uriMatcher.match(uri)) {
</span></span><span style="display:flex;"><span> table1Dir <span style="color:#f92672">-&gt;</span> <span style="color:#e6db74">&#34;vnd.android.cursor.dir/vnd.com.example.app.provider.table1&#34;</span>
</span></span><span style="display:flex;"><span> table1Item <span style="color:#f92672">-&gt;</span> <span style="color:#e6db74">&#34;vnd.android.cursor.item/vnd.com.example.app.provider.table1&#34;</span>
</span></span><span style="display:flex;"><span> table2Dir <span style="color:#f92672">-&gt;</span> <span style="color:#e6db74">&#34;vnd.android.cursor.dir/vnd.com.example.app.provider.table2&#34;</span>
</span></span><span style="display:flex;"><span> table2Item <span style="color:#f92672">-&gt;</span> <span style="color:#e6db74">&#34;vnd.android.cursor.item/vnd.com.example.app.provider.table2&#34;</span>
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">else</span> <span style="color:#f92672">-&gt;</span> <span style="color:#66d9ef">null</span>
</span></span><span style="display:flex;"><span> }
</span></span></code></pre></div><p>（5）实现<code>onCreate()</code></p>
<p>对于增删改查，通常我们都会结合SQLite来实现，因此在<code>onCreate()</code>方法中我们就是得到<code>SQLiteOpenHelper</code>对象，此处MyDatabaseHelper就是一个<code>SQLiteOpenHelper</code>对象。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#66d9ef">override</span> <span style="color:#66d9ef">fun</span> <span style="color:#a6e22e">onCreate</span>() = context<span style="color:#f92672">?.</span>let {
</span></span><span style="display:flex;"><span> dbHelper = MyDatabaseHelper(<span style="color:#66d9ef">it</span>, <span style="color:#e6db74">&#34;BookStore.db&#34;</span>, <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span> } <span style="color:#f92672">?:</span> <span style="color:#66d9ef">false</span>
</span></span></code></pre></div><p>对于剩余的增删改查函数结合SQLite进行相应的实现。</p>
<h3 id="五fragment相关">五、Fragment相关</h3>
<h4 id="1使用fragment的好处">1.使用Fragment的好处</h4>
<p>（1）Fragment能够将activity分离成多个可重用的组件，每个组件都有自己的生命周期和UI。</p>
<p>（2）Fragment可以创建适应于不同的屏幕尺寸动态灵活的UI设计。</p>
<p>（3）Fragment可以使我们在不同的安卓设备上统一UI。</p>
<h3 id="六intent相关">六、Intent相关</h3>
<h4 id="1intent的作用是什么可以传递那些类型的参数">1.Intent的作用是什么，可以传递那些类型的参数？</h4>
<p>Intent是连接四大组件的信使，可以传递八种基本数据类型以及 String 、 Bundle 类型，以及传递实现了 Serializable 或者 Parcelable 接口的类。</p>
<p>对于activity，Intent可以启动activity，通过<code>startActivity()</code> 和用 <code>startActivityForResult()</code>方法实现。</p>
<p>对于service，Intent可以启动service，通过<code>startService()</code>或<code>bindService()</code></p>
<p>最后可以传递广播，通过<code>sendBroadcast()</code>、<code>sendOrderedBroadcast()</code> 或<code>sendStickyBroadcast()</code></p>
<h4 id="2什么是intent的显式与隐式">2.什么是Intent的显式与隐式</h4>
<p>Intent分为显式Intent与隐式Intent。</p>
<h5 id="1显示intent">（1）显示Intent</h5>
<p>1）构造方法传入Component，最常用的方式：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Intent intent <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Intent<span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">,</span> SecondActivity<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">);</span>  
</span></span><span style="display:flex;"><span>startActivity<span style="color:#f92672">(</span>intent<span style="color:#f92672">);</span>  
</span></span></code></pre></div><p>2）<code>setComponent</code>方法</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>ComponentName componentName <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ComponentName<span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">,</span> SecondActivity<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">);</span>  
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 或 ComponentName componentName = new ComponentName(this, &#34;com.example.app.SecondActivity&#34;);  
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// 或 ComponentName componentName = new ComponentName(this.getPackageName(), &#34;com.example.app.SecondActivity&#34;);  
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  
</span></span><span style="display:flex;"><span>Intent intent <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Intent<span style="color:#f92672">();</span>  
</span></span><span style="display:flex;"><span>intent<span style="color:#f92672">.</span><span style="color:#a6e22e">setComponent</span><span style="color:#f92672">(</span>componentName<span style="color:#f92672">);</span>  
</span></span><span style="display:flex;"><span>startActivity<span style="color:#f92672">(</span>intent<span style="color:#f92672">);</span>
</span></span></code></pre></div><p>3)<code>setClass / setClassName</code> 方法</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Intent intent <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Intent<span style="color:#f92672">();</span>    
</span></span><span style="display:flex;"><span>intent<span style="color:#f92672">.</span><span style="color:#a6e22e">setClass</span><span style="color:#f92672">(</span><span style="color:#66d9ef">this</span><span style="color:#f92672">,</span> SecondActivity<span style="color:#f92672">.</span><span style="color:#a6e22e">class</span><span style="color:#f92672">);</span>  
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 或 intent.setClassName(this, &#34;com.example.app.SecondActivity&#34;);  
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// 或 intent.setClassName(this.getPackageName(),&#34;com.example.app.SecondActivity&#34;);            
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>startActivity<span style="color:#f92672">(</span>intent<span style="color:#f92672">);</span>  
</span></span></code></pre></div><h5 id="2隐式intent">（2）隐式Intent</h5>
<p>不明确指定启动哪个Activity，而是在<code>AndroidManifest.xml</code>的activity选项中设置Action、Data、Category，让系统来筛选出合适的Activity。筛选是根据所有的<code>&lt;intent-filter&gt;</code>来筛选。<code>&lt;intent-filter&gt;</code>被称为Intent过滤器。</p>
<p><!-- raw HTML omitted -->：name 属性中声明接受的Intent操作。</p>
<p><!-- raw HTML omitted --> ：声明接受的数据类型。</p>
<p><!-- raw HTML omitted --> ：在 name 属性中，声明接受的Intent类别。</p>

        </div>

        


        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/posts/bitmap/">Bitmap</a></li>
        
        <li><a href="/posts/%E8%87%AA%E5%AE%9A%E4%B9%89view/">自定义控件</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='/tags/android%E5%9F%BA%E7%A1%80'>Android基础</a></li>
                
                <li><a href='/tags/%E5%9B%9B%E5%A4%A7%E7%BB%84%E4%BB%B6'>四大组件</a></li>
                
                <li><a href='/tags/%E9%9D%A2%E8%AF%95'>面试</a></li>
                
            </ul>
            
        </div>
    </article>
    
    

    
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2022 <a href="https://leon-cappuccino.github.io/">Leon Blog By </a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">飞雪无情</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>






                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='//www.google.com/search' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://leon-cappuccino.github.io/">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://leon-cappuccino.github.io/posts/android%E6%9C%AC%E5%9C%B0%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/" title="Android本地数据存储">Android本地数据存储</a>
    </li>
    
    <li>
        <a href="https://leon-cappuccino.github.io/posts/android%E7%BD%91%E7%BB%9C%E6%8A%80%E6%9C%AF/" title="Android网络技术">Android网络技术</a>
    </li>
    
    <li>
        <a href="https://leon-cappuccino.github.io/posts/jetpack/" title="Jetpack">Jetpack</a>
    </li>
    
    <li>
        <a href="https://leon-cappuccino.github.io/posts/android%E9%9D%A2%E8%AF%95%E9%A2%98%E4%B9%8B%E5%9B%9B%E5%A4%A7%E7%BB%84%E4%BB%B6/" title="Android面试题之四大组件">Android面试题之四大组件</a>
    </li>
    
    <li>
        <a href="https://leon-cappuccino.github.io/posts/bitmap/" title="Bitmap">Bitmap</a>
    </li>
    
    <li>
        <a href="https://leon-cappuccino.github.io/posts/%E8%87%AA%E5%AE%9A%E4%B9%89view/" title="自定义控件">自定义控件</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href='/categories/'>分类</a></h3>
<ul class="widget-list">
    
    <li><a href="https://leon-cappuccino.github.io/categories/android%E5%9F%BA%E7%A1%80/">Android基础 (4)</a></li>
    
    <li><a href="https://leon-cappuccino.github.io/categories/android%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">Android基础知识 (2)</a></li>
    
    <li><a href="https://leon-cappuccino.github.io/categories/android%E7%BD%91%E7%BB%9C/">Android网络 (1)</a></li>
    
    <li><a href="https://leon-cappuccino.github.io/categories/jetpack/">Jetpack (1)</a></li>
    
    <li><a href="https://leon-cappuccino.github.io/categories/%E6%95%B0%E6%8D%AE/">数据 (1)</a></li>
    
    <li><a href="https://leon-cappuccino.github.io/categories/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6/">自定义控件 (1)</a></li>
    
    <li><a href="https://leon-cappuccino.github.io/categories/%E9%9D%A2%E8%AF%95/">面试 (1)</a></li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href='/tags/'>标签</a></h3>
<div class="tagcloud">
    
    <a href="https://leon-cappuccino.github.io/tags/android%E5%9F%BA%E7%A1%80/">Android基础</a>
    
    <a href="https://leon-cappuccino.github.io/tags/bitmap/">bitmap</a>
    
    <a href="https://leon-cappuccino.github.io/tags/jetpack/">Jetpack</a>
    
    <a href="https://leon-cappuccino.github.io/tags/retrofit/">retrofit</a>
    
    <a href="https://leon-cappuccino.github.io/tags/%E5%9B%9B%E5%A4%A7%E7%BB%84%E4%BB%B6/">四大组件</a>
    
    <a href="https://leon-cappuccino.github.io/tags/%E6%9C%AC%E5%9C%B0%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8/">本地数据存储</a>
    
    <a href="https://leon-cappuccino.github.io/tags/%E7%BD%91%E7%BB%9C/">网络</a>
    
    <a href="https://leon-cappuccino.github.io/tags/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8E%A7%E4%BB%B6/">自定义控件</a>
    
    <a href="https://leon-cappuccino.github.io/tags/%E9%9D%A2%E8%AF%95/">面试</a>
    
</div>
    </section>

    

    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://leon-cappuccino.github.io/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>